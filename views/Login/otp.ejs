<%- include('../include/header.ejs') %>


    <!-- mobile fix menu end -->

    <!-- Breadcrumb Section Start -->
    <section class="breadcrumb-section pt-0">
        <div class="container-fluid-lg">
            <div class="row">
                <div class="col-12">
                    <div class="breadcrumb-contain">
                        <h2>OTP</h2>
                        <nav>
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item">
                                    <a href="/">
                                        <i class="fa-solid fa-house"></i>
                                    </a>
                                </li>
                                <li class="breadcrumb-item active">OTP</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->



    <% if (successMessages && successMessages.length> 0) { %>
        <div class="alert alert-success" role="alert">
            <% successMessages.forEach(message=> { %>
                <%= message %><br>
                    <% }); %>
        </div>
        <% } %>




            <!-- Your OTP form and other content here -->


            <!-- log in section start -->
            <section class="log-in-section otp-section section-b-space">
                <div class="container-fluid-lg">
                    <div class="row">
                        <div class="col-xxl-6 col-xl-5 col-lg-6 d-lg-block d-none ms-auto">
                            <div class="image-contain">
                                <img src="<%= baseUrl %>/assets/images/inner-page/otp.png" class="img-fluid" alt="">
                            </div>
                        </div>

                        <div class="col-xxl-4 col-xl-5 col-lg-6 col-sm-8 mx-auto">
                            <div class="d-flex align-items-center justify-content-center h-100">
                                <div class="log-in-box">
                                    <div class="log-in-title">
                                        <h3 class="text-title">Forgot Password</h3>
                                        <h5 class="text-content">Enter OTP sent on Registered Mobile No.
                                            <span></span>
                                        </h5>
                                    </div>



                                    <form action="otp" class="requires-validation" method="post" novalidate>

                                        <div id="otp" class="inputs d-flex flex-row justify-content-center pb-4">
                                            <input class="text-center form-control rounded otp-input" type="tel"
                                                id="first" name="otp1" maxlength="1" placeholder="0" required>
                                            <input class="text-center form-control rounded otp-input" type="tel"
                                                id="second" name="otp2" maxlength="1" placeholder="0" required>
                                            <input class="text-center form-control rounded otp-input" type="tel"
                                                id="third" name="otp3" maxlength="1" placeholder="0" required>
                                            <input class="text-center form-control rounded otp-input" type="tel"
                                                id="fourth" name="otp4" maxlength="1" placeholder="0" required>
                                        </div>


                                        <div class="form-floating theme-form-floating pb-2">
                                            <select class="form-select" id="floatingSelect1" name="security_question"
                                                required>
                                                <option selected disabled value="">Select Security Question</option>

                                                <% security_question.forEach(data=>{ %>
                                                    <option value="<%= data.id %>">
                                                        <%= data.question %>
                                                    </option>
                                                    <% }) %>
                                            </select>
                                        </div>

                                        <div class=" theme-form-floating pb-2">
                                            <input type="text" class="form-control" maxlength="20"
                                                name="security_question_answer" placeholder="security question answer"
                                                required>
                                        </div>
                                        <div class=" theme-form-floating pb-2">
                                            <input type="text" class="form-control" maxlength="20" name="password"
                                                placeholder="Enter New Password" required>
                                        </div>
                                        <div class=" theme-form-floating pb-2">
                                            <input type="text" class="form-control" maxlength="20"
                                                name="Confirmpassword" placeholder="Confirm New Password" required>
                                        </div>

                                        <div class="send-box pt-4">
                                            <h5> <a href="./forgot" class="theme-color fw-bold">Change
                                                    Email/Mobile</a>
                                            </h5>
                                        </div>

                                        <button class="btn btn-animation w-100 mt-3" type="submit">Validate</button>


                                    </form>



                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- log in section end -->

            <!-- Footer Section Start -->

            <%- include('../include/footer.ejs') %>

                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        const otpInputs = document.querySelectorAll('.otp-input');

                        otpInputs.forEach(function (input, index) {
                            input.addEventListener('input', function () {
                                // Remove any non-numeric characters
                                input.value = input.value.replace(/\D/g, '');

                                if (input.value.length === 1) {
                                    // Move focus to the next input field if available
                                    if (index < otpInputs.length - 1) {
                                        otpInputs[index + 1].focus();
                                    }
                                } else if (input.value.length === 0) {
                                    // Move focus to the previous input field if deleting a digit
                                    if (index > 0) {
                                        otpInputs[index - 1].focus();
                                    }
                                }
                            });

                            // Prevent typing more than one digit in each input field
                            input.addEventListener('keypress', function (event) {
                                if (event.key && !/^\d$/.test(event.key)) {
                                    event.preventDefault();
                                }
                            });
                        });
                    });

                </script>

                <% if (messages && messages.length> 0) { %>
                    <% messages.forEach(message=> { %>


                        <script>
                            // Optionally, you can perform additional actions after successfully adding the item to cart
                            $.notify({
                                // icon: "",
                                //  title: "",
                                message: "   <%= message %>",
                            }, {
                                element: "body",
                                position: null,
                                type: "danger",
                                allow_dismiss: true,
                                newest_on_top: false,
                                showProgressbar: true,
                                placement: {
                                    from: "top",
                                    align: "right",
                                },
                                offset: 20,
                                spacing: 10,
                                z_index: 1031,
                                delay: 1000,
                                animate: {
                                    enter: "animated fadeInDown",
                                    exit: "animated fadeOutUp",
                                },
                                icon_type: "class",
                                template: '<div data-notify="container" class="col-xxl-3 col-lg-5 col-md-6 col-sm-7 col-12 alert alert-{0}" role="alert">' +
                                    '<button type="button" aria-hidden="true" class="btn-close" data-notify="dismiss"></button>' +
                                    '<span data-notify="icon"></span> ' +
                                    '<span data-notify="title">{1}</span> ' +
                                    '<span data-notify="message">{2}</span>' +
                                    '<div class="progress" data-notify="progressbar">' +
                                    '<div class="progress-bar progress-bar-info progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
                                    "</div>" +
                                    '<a href="{3}" target="{4}" data-notify="url"></a>' +
                                    "</div>",
                            });



                        </script>
                        <% }); %>
                            <% } %>


                                <script>
                                    (function () {
                                        'use strict'
                                        const forms = document.querySelectorAll('.requires-validation')
                                        Array.from(forms)
                                            .forEach(function (form) {
                                                form.addEventListener('submit', function (event) {
                                                    if (!form.checkValidity()) {
                                                        event.preventDefault()
                                                        event.stopPropagation()
                                                    }

                                                    form.classList.add('was-validated')
                                                }, false)
                                            })
                                    })()
                                </script>